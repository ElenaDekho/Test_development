import unittest
from names import find_same_name_courses  # импортируем тестируемую функцию


class TestFindSameNameCourses(unittest.TestCase):
    """
    Класс для тестирования функции find_same_name_courses.
    Наследуем от unittest.TestCase.
    """

    def setUp(self):
        """
        Метод setUp вызывается перед каждым тестом.
        Здесь мы подготавливаем тестовые данные — список курсов,
        как в оригинальном задании (4 курса с менторами).
        Это позволяет не дублировать данные в каждом тесте.
        """
        self.courses_list = [
            {
                "title": "Java-разработчик с нуля",
                "mentors": [
                    "Филипп Воронов", "Анна Юшина", "Иван Бочаров", "Анатолий Корсаков",
                    "Юрий Пеньков", "Илья Сухачев", "Иван Маркитан", "Ринат Бибиков",
                    "Вадим Ерошевичев", "Тимур Сейсембаев", "Максим Батырев", "Никита Шумский",
                    "Алексей Степанов", "Денис Коротков", "Антон Глушков", "Сергей Индюков",
                    "Максим Воронцов", "Евгений Грязнов", "Константин Виролайнен", "Сергей Сердюк",
                    "Павел Дерендяев"
                ],
                "duration": 14
            },
            {
                "title": "Fullstack-разработчик на Python",
                "mentors": [
                    "Евгений Шмаргунов", "Олег Булыгин", "Александр Бардин", "Александр Иванов",
                    "Кирилл Табельский", "Александр Ульянцев", "Роман Гордиенко", "Адилет Асканжоев",
                    "Александр Шлейко", "Алена Батицкая", "Денис Ежков", "Владимир Чебукин",
                    "Эдгар Нуруллин", "Евгений Шек", "Максим Филипенко", "Елена Никитина"
                ],
                "duration": 20
            },
            {
                "title": "Python-разработчик с нуля",
                "mentors": [
                    "Евгений Шмаргунов", "Олег Булыгин", "Дмитрий Демидов", "Кирилл Табельский",
                    "Александр Ульянцев", "Александр Бардин", "Александр Иванов", "Антон Солонилин",
                    "Максим Филипенко", "Елена Никитина", "Азамат Искаков", "Роман Гордиенко"
                ],
                "duration": 12
            },
            {
                "title": "Frontend-разработчик с нуля",
                "mentors": [
                    "Владимир Чебукин", "Эдгар Нуруллин", "Евгений Шек", "Валерий Хаслер",
                    "Татьяна Тен", "Александр Фитискин", "Александр Шлейко", "Алена Батицкая",
                    "Александр Беспоясов", "Денис Ежков", "Николай Лопин", "Михаил Ларченко"
                ],
                "duration": 20
            }
        ]

    def test_find_same_name_courses(self):
        """
        Основной позитивный тест: проверяем, что функция корректно находит всех тёзок
        на всех четырёх курсах и возвращает список строк в правильном формате.
        Мы сравниваем результат с заранее подготовленным ожидаемым результатом (expected).
        """
        result = find_same_name_courses(self.courses_list)
        expected = [
            'На курсе Java-разработчик с нуля есть тёзки: Иван Бочаров, Иван Маркитан, Максим Батырев, Максим Воронцов, Сергей Индюков, Сергей Сердюк',
            'На курсе Fullstack-разработчик на Python есть тёзки: Александр Бардин, Александр Иванов, Александр Ульянцев, Александр Шлейко, Евгений Шек, Евгений Шмаргунов',
            'На курсе Python-разработчик с нуля есть тёзки: Александр Бардин, Александр Иванов, Александр Ульянцев',
            'На курсе Frontend-разработчик с нуля есть тёзки: Александр Беспоясов, Александр Фитискин, Александр Шлейко'
        ]
        self.assertEqual(result, expected)

    def test_empty_course_list(self):
        """
        Граничный случай: пустой список курсов.
        Ожидаем, что функция вернёт пустой список — т.к. нечего обрабатывать.
        """
        self.assertEqual(find_same_name_courses([]), [])

    def test_no_duplicates(self):
        """
        Случай, когда на курсе нет тёзок (все имена уникальны).
        Функция должна вернуть пустой список.
        """
        course = [{
            "title": "Тест",
            "mentors": ["Анна Петрова", "Борис Иванов", "Виктор Сидоров"],
            "duration": 10
        }]
        self.assertEqual(find_same_name_courses(course), [])

    def test_one_duplicate(self):
        """
        Простой позитивный кейс: на курсе ровно два человека с одинаковым именем.
        Проверяем, что функция их находит и формирует корректную строку результата.
        """
        course = [{
            "title": "Курс с дублем",
            "mentors": ["Иван Петров", "Иван Сидоров", "Анна Кузнецова"],
            "duration": 5
        }]
        expected = ['На курсе Курс с дублем есть тёзки: Иван Петров, Иван Сидоров']
        self.assertEqual(find_same_name_courses(course), expected)